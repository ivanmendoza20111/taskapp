{% extends 'base.html.twig' %}

{% block title %}
    Lista de Usuarios
{% endblock %}

{% block body %}
    <div class="container">
    <h1> Lista de Usuarios </h1>
        <div class="pull-right">
            <button class="btn btn-default" id="btnNuevo" aria-hidden="true"><span class="glyphicon glyphicon-plus"></span> <b>Nuevo Usuario</b></button>
        </div>
<div class="container-fluid"></div>
<br>
    <table class="table table-condensed table-hover table-bordered table-responsive">
        <thead>
            <tr>
                <th>ID</th>
                <th>Nombre</th>
                <th>UserName</th>
                <th>Acciones</th>
            </tr>
        </thead>
        <tbody>
        {% for usuario in usuarios %}
            <tr>
                <td>{{ usuario.id }}</td>
                <td>{{ usuario.nombre }}</td>
                <td>{{ usuario.username }}</td>
                <td>
                    <a href="{{ path('editar_usuario', {'id': usuario.id } ) }}" id="editUsuario" class="btn btn-primary btn-xs"><span class="glyphicon glyphicon-edit" aria-hidden="true"></span> <b>Editar</b></a>&nbsp;
                    <a id="removeUsuario" class="btn btn-danger btn-xs" onclick="eliminar( {{ usuario.id }} )"><span class="glyphicon glyphicon-remove" aria-hidden="true"></span> <b>Eliminar</b></a>
                </td>
            </tr>
        {% endfor %}
        </tbody>
    </table>
    </div>

    <script>
        function eliminar(id){
            $.ajax({
                url: '/app_dev.php/rest/usuario/' + id,
                type: 'DELETE',
                success: function (response) {
                    console.log(response);
                    $(this).remove();
                },
                error: function (err) {
                    console.log(err);
                }
            });
        }
    </script>

{% endblock %}